# pandoc-ui/Dockerfile (multi-arch friendly, senza pip)
FROM debian:bookworm-slim

# Pandoc + LaTeX per PDF (XeLaTeX) + Flask/Waitress da Debian + tini
RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \
    pandoc \
    texlive-xetex texlive-latex-recommended texlive-fonts-recommended texlive-latex-extra \
    python3 python3-flask python3-waitress \
    tini ca-certificates curl && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

WORKDIR /app
COPY app.py /app/app.py
COPY index.html /app/index.html

ENV PORT=8080
EXPOSE 8080

ENTRYPOINT ["/usr/bin/tini","--"]
# waitress-serve Ã¨ nel PATH come script Debian
CMD ["waitress-serve", "--port=8080", "--call", "app:create_app"]